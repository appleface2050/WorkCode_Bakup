<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>预装应用信息</title>
    <script type="text/javascript" src="../../static/js/jquery-1.5.1.min.js"></script>
<script>
$.ajaxSetup({
  data: {csrfmiddlewaretoken: '{{ csrf_token }}'},
});
</script>
</head>
<style type="text/css">
.box {  width: 96%;  margin: 20px auto;  font-family: "Microsoft YaHei";  }
table td,table th {  background: #fff;  padding: 10px  }
.pagination{  float: right;margin:10px}
.bigpic{ width: 300px;  height:100px;}  .bigpic img{ width: 100%;}
.red{ color:#f00}
.input1{ width: 98%; height:30px;line-height: 30px; border: none;outline: none; background: }
</style>
<body>
<h1>{{ name }}</h1>

<form action="conf_partner_preinstall_game_info_add" method="post">
  {% csrf_token %}

    <table width="100%" cellspacing="0" border="0"  cellpadding="0">
      <tr>
        <th width="270" align="left" >合作方标识(partner):</th>
        <td width="180"><input type="text" name="partner" value=""/></td>
        <td><span class="red">*</span>(必须是英文字母数字下划线组成,数字不能开头)</td>
      </tr>
      <tr>
        <th align="left">合作方中文名称(partner_name_zh):</th>
        <td><input type="text" name="partner_name_zh" value=""/></td>
        <td></td>
      </tr>
      <tr>
        <th align="left">游戏名称(game_name):</th>
        <td><input type="text" name="game_name" value=""/></td>
        <td></td>
      </tr>
      <tr>
        <th align="left">包名(package_name):</th>
        <td><input type="text" name="package_name" value=""/></td>
        <td><span class="red">*</span></td>
      </tr>
      <tr>
        <th align="left">下载地址(download_url):</th>
        <td><input type="text" name="download_url" value=""/></td>
        <td><span class="red">*</span></td>
      </tr>
      <tr>
        <th align="left">游戏icon(icon_url):</th>
        <td><input type="text" name="icon_url" value=""/></td>
        <td><span class="red">*</span></td>
      </tr>
        <tr><td colspan="3"><input type="submit" value="新增" /></td></tr>
    </table>



</form>
<br>
    <table width="100%" cellspacing="1" border="0" bgcolor="#666666">
      <tr>
        <th>id</th>
        <th>合作方标识(partner)</th>
        <th>合作方中文名称(partner_name_zh)</th>
        <th>游戏名称(game_name)</th>
        <th>包名(package_name)</th>
        <th>下载地址(download_url)</th>
        <th>游戏icon(icon_url)</th>
        <th width="140">更新时间(uptime)</th>
        <th width="72" colspan="2" align="center">操作</th>
      </tr>

      </tr>
        {% for data in datas %}
            <tr>
            <td class="info_id" data_info_id="{{ data.id }}" >{{ data.id }}</td>
            <td><input type="text" class="partner input1" value="{{ data.partner }} "></td>
            <td><input type="text" class="partner_name_zh input1"  value="{{ data.partner_name_zh }}"></td>
            <td><input type="text" class="game_name input1"  value="{{ data.game_name }}"></td>
            <td><input type="text" class="package_name input1"  value="{{ data.package_name }}"></td>
            <td><input type="text" class="download_url input1" value="{{ data.download_url }}"></td>
            <td><input type="text" class="icon_url input1" value="{{ data.icon_url }}"></td>
            <td><input type="text" class="uptime input1"  value="{{ data.uptime }}"></td>
            <td width="36"><a class="modify" onclick="modify_partner(this)" >修改</a></td>
            <td width="36"><a onclick="conf_partner_preinstall_game_info_delete(this)">删除</a></td>
            </tr>
        {% endfor %}
    </table>


<script src="../../static/jquery.min.js"></script>
<script>
   function modify_partner(obj) {

       $.post("conf_partner_preinstall_game_info",
          {
            id:$(obj).parent().parent().find(".info_id").attr("data_info_id"),
            partner:$(obj).parent().parent().find(".partner").val(),
            partner_name_zh:$(obj).parent().parent().find(".partner_name_zh").val(),
            game_name:$(obj).parent().parent().find(".game_name").val(),
            package_name:$(obj).parent().parent().find(".package_name").val(),
            download_url:$(obj).parent().parent().find(".download_url").val(),
            icon_url:$(obj).parent().parent().find(".icon_url").val()
          },
          function(data,status){
            if(data=="success"){
                alert("修改成功");
                 location.reload();
            }else{
                alert("修改失败");
                }
          }
       );
   }


function conf_partner_preinstall_game_info_delete(obj)
{
    //利用对话框返回的值 （true 或者 false）
    if(confirm("你确信要删除这条信息"))
    {
        console.log($(obj).parent().parent().find(".info_id").attr("data_info_id"));
        $.post("conf_partner_preinstall_game_info_delete",
          {
            data_id:$(obj).parent().parent().find(".info_id").attr("data_info_id")
          },
          function(data,status){
            location.reload();
          });
    }
    else{
        //否则说明下了，赫赫
{#      alert("你按了取消，那就是返回false");#}
    }
}
</script>

</body>
</html>