<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>engine data</title>
    {% load staticfiles %}
<link rel="stylesheet" href="http://apps.bdimg.com/libs/bootstrap/3.3.0/css/bootstrap.min.css">
<script src="../static/js/jquery.min.js"></script>
<script src="http://apps.bdimg.com/libs/bootstrap/3.3.0/js/bootstrap.min.js"></script>

</head>
<style type="text/css">
    
</style>
<body>

{#<form action="engine" method="get">#}
{#  开始日期: <input value="{{ start }}" type="text" name="start" />#}
{#  结束日期: <input value="{{ end }}" type="text" name="end" />#}
{#  <input type="submit" value="Submit" />#}
{#</form>#}
{#<br>#}
<br>

<input type="hidden" id="version_str"  value={{version}}>
<input type="hidden" id="channel_str"  value={{channel}}>
<input type="hidden" id="osver_str"  value={{osver}}>
<form class="form-inline" role="form" action="engine" method="get">
   <div class="form-group">
      <label class="sr-only" for="name">开始日期:</label>
      <input type="text" class="form-control" id="name" value="{{ start }}" type="text" name="start">
      <label class="sr-only" for="name">结束日期:</label>
      <input type="text" class="form-control" id="name" value="{{ end }}" type="text" name="end">
   </div>
    <select name="version" class="form-control selectbox_version">
        <script>
		var html_version;
        var version_str=$("#version_str").val();
       // alert(version_str);
		if(version_str=="2.2.31.5992"){
           html_version= "<option value=''>版本</option><option value='2.2.31.5992' selected>2.2.31.5992</option> <option value='2.3.34.6110'>2.3.34.6110</option> <option value='2.3.40.6019'>2.3.40.6019</option> <option value='2.3.43.6028'>2.3.43.6028</option> <option value='2.4.43.6254'>2.4.43.6254</option>";
         }else if(version_str=="2.3.34.6110"){
            html_version= "<option value=''>版本</option><option value='2.2.31.5992' >2.2.31.5992</option> <option value='2.3.34.6110' selected>2.3.34.6110</option> <option value='2.3.40.6019'>2.3.40.6019</option> <option value='2.3.43.6028'>2.3.43.6028</option> <option value='2.4.43.6254'>2.4.43.6254</option>";
         }else if(version_str=="2.3.40.6019"){
            html_version= "<option value=''>版本</option><option value='2.2.31.5992' >2.2.31.5992</option> <option value='2.3.34.6110'>2.3.34.6110</option> <option value='2.3.40.6019' selected>2.3.40.6019</option> <option value='2.3.43.6028'>2.3.43.6028</option> <option value='2.4.43.6254'>2.4.43.6254</option>";
         }else if(version_str=="2.3.43.6028"){
            html_version= "<option value=''>版本</option><option value='2.2.31.5992' >2.2.31.5992</option> <option value='2.3.34.6110'>2.3.34.6110</option> <option value='2.3.40.6019' >2.3.40.6019</option> <option value='2.3.43.6028' selected>2.3.43.6028</option> <option value='2.4.43.6254'>2.4.43.6254</option>";
         }else if(version_str=="2.4.43.6254"){
            html_version= "<option value=''>版本</option><option value='2.2.31.5992' >2.2.31.5992</option> <option value='2.3.34.6110'>2.3.34.6110</option> <option value='2.3.40.6019' >2.3.40.6019</option> <option value='2.3.43.6028'>2.3.43.6028</option><option value='2.4.43.6254' selected>2.4.43.6254</option>";
         }
         else{
             html_version="<option value='' selected>版本</option><option value='2.2.31.5992' >2.2.31.5992</option> <option value='2.3.34.6110'>2.3.34.6110</option> <option value='2.3.40.6019'>2.3.40.6019</option> <option value='2.3.43.6028' >2.3.43.6028</option><option value='2.4.43.6254' >2.4.43.6254</option>";
         }
		$(".selectbox_version").html(html_version);
        </script>
    </select>
    <select name="channel" class="form-control selectbox_channel">
        <script>
		var html_channel;
        var channel_str=$("#channel_str").val();
        if(channel_str=="bscn"){
             html_channel="<option value=''>渠道</option> <option value='bscn' selected>bscn</option> <option value='pokemon'>pokemon</option>  <option value='bscn_full'>bscn_full</option> <option value='360gj'>360gj</option> <option value='alading'>alading</option> <option value='txgj'>txgj</option> <option value='xiazai'>xiazai</option> <option value='kdbs'>kdbs</option>";
        }else if(channel_str=="pokemon"){
             html_channel="<option value=''>渠道</option> <option value='bscn'>bscn</option> <option value='pokemon' selected>pokemon</option> <option value='bscn_full'>bscn_full</option><option value='360gj'>360gj</option> <option value='alading'>alading</option> <option value='txgj'>txgj</option> <option value='xiazai'>xiazai</option> <option value='kdbs'>kdbs</option>";
        }else if(channel_str=="bscn_full"){
             html_channel="<option value=''>渠道</option> <option value='bscn'>bscn</option> <option value='pokemon'>pokemon</option> <option value='bscn_full' selected>bscn_full</option><option value='360gj'>360gj</option> <option value='alading'>alading</option> <option value='txgj'>txgj</option> <option value='xiazai'>xiazai</option> <option value='kdbs'>kdbs</option>";
        }else if(channel_str=="360gj"){
             html_channel="<option value=''>渠道</option> <option value='bscn'>bscn</option> <option value='pokemon'>pokemon</option> <option value='bscn_full' selected>bscn_full</option><option value='360gj' selected>360gj</option> <option value='alading'>alading</option> <option value='txgj'>txgj</option> <option value='xiazai'>xiazai</option> <option value='kdbs'>kdbs</option>";
        }else if(channel_str=="alading"){
             html_channel="<option value=''>渠道</option> <option value='bscn'>bscn</option> <option value='pokemon'>pokemon</option> <option value='bscn_full' selected>bscn_full</option><option value='360gj'>360gj</option> <option value='alading' selected>alading</option> <option value='txgj'>txgj</option> <option value='xiazai'>xiazai</option> <option value='kdbs'>kdbs</option>";
        }else if(channel_str=="txgj"){
             html_channel="<option value=''>渠道</option> <option value='bscn'>bscn</option> <option value='pokemon'>pokemon</option> <option value='bscn_full' selected>bscn_full</option><option value='360gj'>360gj</option> <option value='alading'>alading</option> <option value='txgj' selected>txgj</option> <option value='xiazai'>xiazai</option> <option value='kdbs'>kdbs</option>";
        }else if(channel_str=="xiazai"){
             html_channel="<option value=''>渠道</option> <option value='bscn'>bscn</option> <option value='pokemon'>pokemon</option> <option value='bscn_full' selected>bscn_full</option><option value='360gj'>360gj</option> <option value='alading'>alading</option> <option value='txgj'>txgj</option> <option value='xiazai' selected>xiazai</option> <option value='kdbs'>kdbs</option>";
        }else if(channel_str=="kdbs"){
             html_channel="<option value=''>渠道</option> <option value='bscn'>bscn</option> <option value='pokemon'>pokemon</option> <option value='bscn_full' selected>bscn_full</option><option value='360gj'>360gj</option> <option value='alading'>alading</option> <option value='txgj'>txgj</option> <option value='xiazai'>xiazai</option> <option value='kdbs' selected>kdbs</option>";
        }else{
             html_channel="<option value='' selected>渠道</option> <option value='bscn'>bscn</option> <option value='pokemon'>pokemon</option>  <option value='bscn_full'>bscn_full</option><option value='360gj'>360gj</option> <option value='alading'>alading</option> <option value='txgj'>txgj</option> <option value='xiazai'>xiazai</option> <option value='kdbs'>kdbs</option>";
        }
        $(".selectbox_channel").html(html_channel);
        </script>
    </select>
    <select name="osver" class="form-control selectbox_osver">
    <script>
		var html_osver;
        var osver_str=$("#osver_str").val();
        if(osver_str=="5.1"){
             html_osver=" <option value=''>操作系统</option><option value='5.1' selected>5.1</option><option value='6.0'>6.0</option><option value='6.1'>6.1</option><option value='6.2'>6.2</option>";
        }else if(osver_str=="6.0"){
             html_osver=" <option value=''>操作系统</option><option value='5.1'>5.1</option><option value='6.0' selected>6.0</option><option value='6.1'>6.1</option><option value='6.2'>6.2</option>";
        }else if(osver_str=="6.1"){
             html_osver=" <option value=''>操作系统</option><option value='5.1'>5.1</option><option value='6.0'>6.0</option><option value='6.1' selected>6.1</option><option value='6.2'>6.2</option>";
        }else if(osver_str=="6.2"){
             html_osver=" <option value=''>操作系统</option><option value='5.1'>5.1</option><option value='6.0'>6.0</option><option value='6.1'>6.1</option><option value='6.2' selected>6.2</option>";
        }else{
             html_osver=" <option value='' selected>操作系统</option><option value='5.1'>5.1</option><option value='6.0'>6.0</option><option value='6.1'>6.1</option><option value='6.2'>6.2</option>";
        }
        $(".selectbox_osver").html(html_osver);
        </script>
    </select>
   <button type="submit" class="btn btn-default submit_btn">submit</button>
</form>
<br>
<table class="table table-striped table-hover table-condensed">
  <tr>
    <th>日期</th>
    <th title="当日引擎安装并启动成功人数">日安装用户数</th>
    <th title="累计引擎安装并启动成功人数">累计安装用户数</th>
    <th title="当日引擎启动成功人数">DAU</th>
    <th title="当日引擎初次启动人数 / 引擎开始下载人数">下载安装初始化成功率</th>
    <th title="当日引擎安装失败人数 / 引擎开始安装人数">日安装失败率</th>
    <th title="引擎初次启动失败人数 / 引擎安装成功人数">初次启动失败率</th>
    <th title="当日引擎非初次安装且启动失败人数/引擎开始启动人数">启动失败率</th>
{#    <th title="当日引擎非初次安装且启动成功人数/引擎开始启动人数">启动非成功率</th>#}
    <th title="开始下载人数">开始下载人数</th>
    <th title="下载成功人数">下载成功人数</th>
    <th title="（开始下载引擎人数 - 下载成功人数）/ 开始下载引擎人数">下载流失</th>
    <th title="安装成功人数">安装成功人数</th>
    <th title="（下载成功人数 - 安装成功人数）/ 下载成功人数">安装流失</th>
    <th title="初次启动成功人数">初次启动成功人数</th>
    <th title="(引擎安装成功人数-首次启动成功人数)/ 引擎安装成功人数">初始化流失</th>
    <th title="初次启动失败人数">初次启动失败人数</th>
  </tr>
{% for data in datas %}
    <tr>
        <td>{{ data.date }}</td>
        <td>{{ data.daily_install }}</td>
        <td>{{ data.acc_install_success_user }}</td>
        <td>{{ data.daily_user_init }}</td>
        <td>{{ data.install_success_rate }}</td>
        <td>{{ data.install_fail_rate }}</td>
        <td>{{ data.first_init_fail_rate }}</td>
        <td>{{ data.init_fail_rate }}</td>
{#        <td>{{ data.init_not_success_rate }}</td>#}
        <td>{{ data.begin_download }}</td>
        <td>{{ data.download_ok }}</td>
        <td>{{ data.download_begin_minues_download_ok_div_begin_download }}</td>
        <td>{{ data.daily_install }}</td>
        <td>{{ data.download_ok_minus_daily_install_div_download_ok }}</td>
        <td>{{ data.first_init }}</td>
        <td>{{ data.daily_install_minus_first_init_div_daily_install }}</td>
        <td>{{ data.first_init_fail }}</td>
    </tr>
{% endfor %}
</table>
</body>
</html>
